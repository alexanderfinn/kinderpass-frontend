
<div *ngIf="!gs.isAuthenticated" class="firstScreen">
	<div class="wrapper">
		<div class="title">
			<h1>Абонемент на лучшие детские мероприятия Питера</h1>
			<p>Киндерпасс дает возможность найти, записаться и посетить интересные мастер-классы и детские активности с хорошей скидкой</p>
			<a pageScroll href="#subscription" class="btn btn-line">Попробовать</a>
		</div>
	</div>

</div>
<!-- BODY -->

<div *ngIf="!gs.isAuthenticated" class="advantages">
	<div class="wrapper">
		<h2>Смысл абонемента</h2>
		<div class="advantages-slider">
			<div class="advantages-item">
				<img src="app/img/adItem1.png" alt=""><!-- 
			 --><div>
					<h3>Экономия времени</h3>
					<p>Просто выберите дату и время. В абонемент входят лучшие классы, занятия и другие активности для единоразового посещения.</p>
				</div>
			</div><!-- 
				 --><div class="advantages-item">
				<img src="app/img/adItem2.png" alt=""><!-- 
			 --><div>
					<h3>Хорошая скидка 10-50%</h3>
					<p>В цену включено определенное количество посещений, которые обошлись бы гораздо дороже, если бы вы пришли туда с улицы.</p>
				</div>
			</div><!-- 
				 --><div class="advantages-item">
				<img src="app/img/adItem3.png" alt=""><!-- 
			 --><div>
					<h3>Новый мир для детей</h3>
					<p>Наш абонемент не про постоянные занятия и кружки, а про то, чтобы расширять кругозор вашего ребенка и показать ему мир.</p>
				</div>
			</div>
		</div>
	</div>
</div>

<div *ngIf="!gs.isAuthenticated" class="steps">
	<div class="wrapper">
		<h2>Как все устроено</h2><!-- 
	 --><div class="steps-wrap">
			<p>Киндерпасс устроен по клубному принципу. Каждый родитель покупает членство (абонемент), и взамен получает возможность бронировать все детские мероприятия и активности с хорошей скидкой.</p>
			<p>Вам нужно зарегистрироваться в Киндерпассе через ФБ или ВК, оплатить абонемент банковской карточкой (это безопасно, мы работаем с нашим партнером - Альфа-Банком) и можно сразу же начать бронировать мероприятия и ходить на них.</p>
		</div>
	</div>
</div>
<div class="form" id="filter">
	<div class="wrapper">
		<h2>Расписание</h2>
		<div class="filters">
			<!-- <div class="filters-item filters-location">
				<span class="filters-option" [class.filters-option-active]="params.districts.id && params.districts.id.length" (click)="gs.openPopup('districts');">Район</span>
				<span class="filters-text">или</span>
				<span class="filters-option" [class.filters-option-active]="params.metro.id && params.metro.id.length" (click)="gs.openPopup('metro');">Метро</span>
				<p *ngIf="params.metro.id" class="locations">{{params.metro.name[0]}}<span *ngIf="params.metro.name.length>1"> и еще {{params.metro.name.length - 1}} {{declOfNum(params.metro.name.length - 1, ['станция','станции','станций'])}}</span></p>
				<p *ngIf="params.districts.id" class="locations">{{params.districts.name[0]}}<span *ngIf="params.districts.name.length>1"> и еще {{params.districts.name.length - 1}} {{declOfNum(params.districts.name.length - 1, ['район','района','районов'])}}</span></p>
			</div>
			--><!-- 
		 --><div class="filters-item filters-time">
				<span class="filters-option" *ngFor="let time of times;" [class.filters-option-active]="params.time_from==time.time_from && params.time_to==time.time_to" (click)="filterByTime($event, time)">{{time.key}}</span>
			</div><!-- 
		 --><div class="filters-item filters-age">
				<span class="filters-option" *ngFor="let age of ages;" [class.filters-option-active]="params.age_from==age[0] && params.age_to==age[1]" (click)="filterByAge($event, age)">{{age[0]}}-{{age[1]}}</span>
				<span class="filters-text">лет</span>
			</div><!-- 
		 --><div class="filters-item filters-category">
				<span class="filters-option" *ngFor="let category of categories; let i = index;"  (click)="filterByCategory($event, category.id)"
				[class.filters-option-active]="category.id == curCategory">{{category.name}}</span>
				<p *ngIf="curCategory == 1">Лучшие места на наш взгляд, чтобы вам было проще выбирать.</p>
				<p *ngIf="curCategory == 2">Батуты, скалодромы, веревочные парки, парки развлечений.</p>
				<p *ngIf="curCategory == 3">Картинг, игровые пространства.</p>
				<p *ngIf="curCategory == 4">Танцы</p>
				<p *ngIf="curCategory == 5">Любые занятия, где нужно что-то делать руками – робототехника, рисование, лепка, гончарное дело и т.д.</p>
				<p *ngIf="curCategory == 7">Музеи, театры, зоопарки, кино.</p>
				<p *ngIf="curCategory == 9">Любые активности, где требуется определенное минимальное количество участников – квесты, футбол, кьюзар и т.д.</p>
				<p *ngIf="curCategory == 10">Любые развивающие занятия – психология, математика, боевые искусства, ритмопластика.</p>
			</div>
		</div>  
		<div class="week">
			<div class="week-day" *ngFor="let d of dates;" [class.filters-option-active]="curDate == (d | amDateFormat: 'YYYYMMDD')" (click)="filterByDate($event, d);">
				<div class="desktop">
					<p>{{d | amDateFormat : 'dddd'}}</p>
					<span>{{d | amDateFormat : 'DD MMMM'}}</span>
				</div>
				<div class="mobile">
					<p>{{d | date: 'EE'}}</p>
					<span>{{d | date:'dd.MM'}}</span>
				</div>
			</div>
			<div class="lastWeek" (click)="lastWeek($event);"></div>
			<div class="nextWeek" (click)="nextWeek($event);"></div>
		</div><!--   
	 --><div class="selectedDay">{{selectedDate | date: 'EEEE'}}, {{selectedDate | date: 'dd.MM'}}</div><!-- 
	 --><div class="results">
	 		<ng-container *ngIf="events.length > 0">
				<div class="results-item" *ngFor="let item of events | slice:0:resultsToShow;">
					<div class="results-item-image" [routerLink]="['/event', item.locations.time_slots.id]">
						<img *ngIf="item.photo" src="img/s{{item.photo}}.jpg" alt="">
						<img *ngIf="!item.photo" src="app/img/placeholder.jpg" alt="">
					</div><!-- 
				 --><div class="results-item-description">
						<div class="results-item-title" [routerLink]="['/event', item.locations.time_slots.id]">{{item.name}}</div>
						<div class="results-item-recommendation">{{item.description | truncate:200 }}</div>
						<div class="results-item-location">{{item.locations.address}}</div>
					</div><!-- 
					 --><div class="results-item-cost">
						<div class="results-item-time"><span>{{item.locations.time_slots.start_time}}</span></div>
						<div class="results-item-price"><span>{{item.locations.time_slots.price}}</span></div>
						<div *ngIf="item.locations.time_slots.discount > 0" class="results-item-discount">Со скидкой {{item.locations.time_slots.discount | number:'1.0-0'}}%</div>
						<div class="btn" [routerLink]="['/event', item.locations.time_slots.id]">Забронировать</div>
					</div>
				</div>
	 		</ng-container>
	 		<p class="results-notFound" *ngIf="events.length <= 0">Не найдено ни одного мероприятия</p>
	 	</div>
	 	<div class="moreResults" *ngIf="resultsToShow < events.length" (click)="resultsToShow = resultsToShow + 8"><span class="btn">Еще (<span>{{events.length - resultsToShow}}</span>)</span></div>
	</div>
</div>
<div *ngIf="!gs.isAuthenticated" class="bottomHelper"></div>
<div *ngIf="!gs.isAuthenticated" class="options" id="subscription">
	<div class="wrapper">
		<h2>Цена абонемента</h2>
		<div>
			<div class="options-item">
				<div class="options-price"><span>200</span> <img src="app/img/money.png" alt=""></div>
				<p class="options-description">При оплате каждый месяц</p>
			</div>
			<div class="options-item">
				<div class="options-price"><span>1900</span> <img src="app/img/money.png" alt=""></div>
				<p class="options-description">При оплате на год вперед</p>
			</div>
		</div>
		<div class="options-text">Первые два месяца вы пользуетесь абонементом совершенно бесплатно и в полном объеме. Ну разве что при бронировании посещений каждый раз нужно будет вводить данные банковской карты.</div>
		<button (click)="gs.openPopup('login')" class="btn btn-line">Попробовать 2 мес<br>бесплатно</button>
	</div>
</div>